[mcu]
##	MCU for X/Y/E steppers main MCU
##	[X in X] - B Motor
##	[Y in Y] - A Motor
##	[E in E0] - Extruder
##	Obtain definition by "ls -l /dev/serial/by-path/" then unplug to verify
##--------------------------------------------------------------------
serial: /dev/serial/by-id/usb-Klipper_lpc1768_17000004090139AF032A0B5DC72000F5-if00
##--------------------------------------------------------------------

[mcu z]
##	MCU for Z steppers
##	[Z in X] - Front Left
##	[Z1 in Y] - Rear Left
##	[Z2 in Z] - Rear Right
##	[Z3 in E0]- Front Right
##	Obtain definition by "ls -l /dev/serial/by-path/" then unplug to verify
##--------------------------------------------------------------------
serial: /dev/serial/by-id/usb-Klipper_lpc1768_01900018A0A447AF28DA155DC42000F5-if00
##--------------------------------------------------------------------

[mcu display]
serial: /dev/serial/by-id/usb-1a86_USB_Serial-if00-port0
pin_map: arduino
restart_method: arduino

[printer]
kinematics: 				corexy
max_velocity: 				300  
max_accel: 					4000
max_accel_to_decel: 		4000
max_z_velocity: 			15
max_z_accel: 				350
square_corner_velocity: 	5.0

[include axes.cfg]
[include macros.cfg]
[include displays.cfg]

#####################################################################
# 	Optional Firmware Settings
#####################################################################

# Force Move for manual stepper control
[force_move]
enable_force_move: 			true

# Pause/Resume Functionality
[pause_resume]

# Timeout after idle
[idle_timeout]
timeout: 					3600   ; 60 minutes

# This adds the 'respond' G-Code that you can use to send commands back to OctoPrint
[respond]
default_type: 				echo

[virtual_sdcard]
path: ~/gcode_files

[display_status]

#[input_shaper]
#shaper_freq_x: 			42.1
#shaper_freq_y: 			51.2
#shaper_type: 				mzv
#damping_ratio_x: 			0.1
#damping_ratio_y: 			0.1


[bed_mesh]
mesh_min: 					50,50
mesh_max: 					225,225
speed: 						300
horizontal_move_z: 			2
probe_count: 				12,12
algorithm: 					bicubic
relative_reference_index: 	78
fade_start: 				1
fade_end: 					10
fade_target: 				0
move_check_distance: 		3
split_delta_z: 				0.0125
mesh_pps: 					5,5
#bicubic_tension: 			0.2

#####################################################################
# 	Extruder
#####################################################################

#	E0 on MCU X/Y
[extruder]
step_pin: 						P2.13
dir_pin: 						P0.11
enable_pin: 					!P2.12
##	step_distance = measured value / wanted value * step_distance_old
step_distance: 					0.002355
nozzle_diameter: 				0.400
filament_diameter: 				1.75
max_extrude_only_distance: 		100.0
heater_pin: 					P2.7
sensor_type: 					ATC Semitec 104GT-2
sensor_pin: 					P0.24
min_temp: 						10
max_temp: 						270
max_power: 						1.0
min_extrude_temp: 				170
control: 						pid
pid_kp: 						20.520
pid_ki: 						0.991
pid_kd: 						106.193
pressure_advance: 				0.04
pressure_advance_smooth_time: 	0.040

##	E0 on MCU X/Y
[tmc2209 extruder]
uart_pin: 						P1.9
microsteps: 					16
interpolate: 					false
run_current: 					0.5
hold_current: 					0.4
sense_resistor: 				0.110
stealthchop_threshold: 			0

#####################################################################
# 	Probe
#####################################################################

[probe]
##	Inductive Probe
##	If your probe is NO instead of NC, add change pin to !z:P1.24
pin: 							z:P1.24
x_offset: 						0
y_offset: 						25.0
z_offset: 						0
speed: 							10.0
samples: 						3
samples_result: 				median
sample_retract_dist: 			3.0
samples_tolerance: 				0.006
samples_tolerance_retries: 		3

#####################################################################
# 	Fan Control
#####################################################################

[heater_fan hotend_fan]
##	Hotend Fan - XYE board, HE1 Connector
pin: 							P2.4
max_power: 						1.0
kick_start_time: 				0.5
heater: 						extruder
heater_temp: 					50.0
#fan_speed:		 				1.0

[fan]
##	Print Cooling Fan - XYE board, Fan Pin
pin: 							P2.3
kick_start_time: 				0.5
off_below: 						0.10
cycle_time: 					0.001

[heater_fan controller_fan]
#	Controller fan - Z board, HE1 Connector
pin: 							z:P2.4
heater: 						heater_bed
heater_temp: 					45.0

[temperature_fan chamber]
# Chamber temp and Exhaust fan
#   See the "temperature_fan" section in example-extras.cfg for a complete
#   description of this sections parameters.
pin: z:P2.7
#   D8 on mcu_z
sensor_type: ATC Semitec 104GT-2
sensor_pin: P0.25
min_temp: 0
max_temp: 70
#   The maximum range of valid temperatures (in Celsius) that the
#   sensor must remain within. This controls a safety feature
#   implemented in the micro-controller code - should the measured
#   temperature ever fall outside this range then the micro-controller
#   will go into a shutdown state. Set this range just wide enough so
#   that reasonable temperatures do not result in an error. These
#   parameters must be provided.
target_temp: 45
#   A temperature (in Celsius) that will be the target temperature.
#   The default is 40 degrees.
control: pid
pid_Kp: 40
pid_Ki: 0.2
pid_Kd: 0.1
pid_deriv_time: 2.0
#pid_integral_max:
#   The maximum "windup" the integral term may accumulate. The default
#   is to use the same value as max_power.
gcode_id: C
#   If set, the temperature will be reported in M105 queries using the
#   given id. The default is to not report the temperature via M105.

#####################################################################
# 	Bed Heater
#####################################################################

[heater_bed]
#	SSR Pin - Z board, Fan Pin
heater_pin: z:P2.3
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin: z:P0.25
max_power: 0.6
min_temp: 0
max_temp: 120
control: pid
pid_kp: 40.599
pid_ki: 1.681
pid_kd: 245.114

[temperature_sensor bedcorner]
sensor_type: ATC Semitec 104GT-2
sensor_pin: z:P0.24
min_temp: 0
max_temp: 120
gcode_id: BC

#####################################################################
#       LED Lights
#####################################################################

# Using the name "caselight" enables a light control on the LCD under CONTROL
#[output_pin caselight]
# LED Lighting - XYE board, BED -V Connector
#pin: P2.5
# Value 1 turns the light on at boot.  Value 0 turns the light off at boot.
#value: 1

#####################################################################
# 	Homing and Gantry Adjustment Routines
#####################################################################

[idle_timeout]
timeout: 1800

[homing_override]
axes: z
set_position_z: 0
gcode:
   G90
   G0 Z5 F600
   G28 X207 Y304
   G0 X207.5 Y305.5 F3600 
   G28 Z
   G0 Z10 F1800
   G0 X150 Y150 Z30 F3600
   
[quad_gantry_level]
#	Use QUAD_GANTRY_LEVEL to level a gantry.
gantry_corners:
	-60,-10
	360,370
points:
	50,25
	50,225
	250,225
	250,25
speed: 100
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075
max_adjust: 10

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.035000, 0.047500, 0.057500, 0.067500, 0.062500, 0.057500, 0.050000, 0.042500, 0.040000, 0.042500, 0.045000, 0.052500
#*# 	  -0.017500, -0.002500, 0.010000, 0.020000, 0.020000, 0.012500, 0.005000, -0.002500, -0.010000, -0.010000, -0.002500, 0.002500
#*# 	  0.005000, 0.017500, 0.030000, 0.032500, 0.032500, 0.027500, 0.015000, 0.012500, 0.010000, 0.007500, 0.012500, 0.017500
#*# 	  0.025000, 0.035000, 0.047500, 0.055000, 0.052500, 0.047500, 0.030000, 0.022500, 0.017500, 0.032500, 0.025000, 0.027500
#*# 	  0.005000, 0.015000, 0.025000, 0.025000, 0.025000, 0.025000, 0.010000, -0.000000, -0.005000, -0.000000, -0.000000, 0.002500
#*# 	  -0.012500, -0.000000, 0.012500, 0.015000, 0.015000, 0.015000, 0.002500, -0.010000, -0.020000, -0.017500, -0.017500, -0.010000
#*# 	  -0.010000, -0.000000, 0.007500, 0.010000, 0.022500, 0.015000, 0.000000, -0.007500, -0.017500, -0.015000, -0.012500, 0.000000
#*# 	  0.000000, 0.017500, 0.027500, 0.032500, 0.032500, 0.035000, 0.022500, 0.010000, 0.002500, 0.005000, 0.005000, 0.012500
#*# 	  0.005000, 0.017500, 0.027500, 0.035000, 0.032500, 0.030000, 0.022500, 0.012500, 0.010000, 0.012500, 0.015000, 0.022500
#*# 	  0.015000, 0.027500, 0.040000, 0.045000, 0.045000, 0.040000, 0.030000, 0.025000, 0.017500, 0.017500, 0.022500, 0.030000
#*# 	  -0.007500, 0.002500, 0.012500, 0.020000, 0.017500, 0.015000, 0.005000, 0.000000, -0.005000, -0.007500, 0.000000, 0.007500
#*# 	  -0.037500, -0.020000, -0.010000, -0.002500, -0.007500, -0.015000, -0.025000, -0.032500, -0.037500, -0.032500, -0.030000, -0.017500
#*# x_count = 12
#*# y_count = 12
#*# mesh_x_pps = 5
#*# mesh_y_pps = 5
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 269.91
#*# min_y = 30.0
#*# max_y = 269.91
#*#
#*# [bed_mesh 90.0C]
#*# version = 1
#*# points =
#*# 	-0.105000, 0.027500, 0.037500, 0.020000, 0.005000, 0.027500, 0.070000
#*# 	-0.115000, 0.037500, 0.025000, 0.012500, 0.002500, 0.020000, 0.072500
#*# 	-0.120000, 0.012500, 0.015000, 0.002500, -0.005000, 0.025000, 0.085000
#*# 	-0.125000, 0.005000, 0.005000, 0.000000, -0.012500, 0.015000, 0.075000
#*# 	-0.125000, 0.002500, 0.002500, 0.002500, 0.050000, 0.010000, 0.075000
#*# 	-0.117500, 0.010000, 0.010000, -0.007500, -0.012500, 0.007500, 0.065000
#*# 	-0.090000, 0.027500, 0.022500, 0.002500, -0.012500, 0.015000, 0.080000
#*# tension = 0.2
#*# min_x = 10.0
#*# algo = bicubic
#*# y_count = 7
#*# mesh_y_pps = 5
#*# min_y = 30.0
#*# x_count = 7
#*# max_y = 270.0
#*# mesh_x_pps = 5
#*# max_x = 289.96
#*#
#*# [bed_mesh 0.0C]
#*# version = 1
#*# points =
#*# 	-0.002500, 0.050000, 0.047500, 0.047500, 0.040000, 0.027500, 0.012500, 0.002500, 0.015000, 0.042500, 0.065000, 0.075000
#*# 	-0.020000, 0.027500, 0.025000, 0.025000, 0.020000, 0.010000, -0.007500, -0.017500, -0.007500, 0.020000, 0.050000, 0.062500
#*# 	0.000000, 0.052500, 0.052500, 0.047500, 0.040000, 0.030000, 0.010000, 0.002500, 0.010000, 0.037500, 0.067500, 0.082500
#*# 	0.002500, 0.052500, 0.060000, 0.057500, 0.045000, 0.037500, 0.020000, 0.010000, 0.020000, 0.047500, 0.080000, 0.095000
#*# 	-0.007500, 0.047500, 0.050000, 0.047500, 0.037500, 0.032500, 0.010000, 0.000000, 0.007500, 0.037500, 0.067500, 0.090000
#*# 	-0.032500, 0.015000, 0.017500, 0.015000, 0.010000, 0.010000, -0.007500, -0.020000, -0.012500, 0.015000, 0.045000, 0.067500
#*# 	-0.035000, 0.017500, 0.017500, 0.017500, 0.017500, 0.020000, -0.012500, -0.025000, -0.017500, 0.010000, 0.042500, 0.067500
#*# 	-0.020000, 0.032500, 0.035000, 0.037500, 0.027500, 0.027500, 0.007500, -0.007500, 0.000000, 0.027500, 0.060000, 0.085000
#*# 	-0.020000, 0.045000, 0.047500, 0.050000, 0.037500, 0.027500, 0.010000, -0.002500, 0.007500, 0.032500, 0.065000, 0.090000
#*# 	-0.037500, 0.020000, 0.022500, 0.025000, 0.015000, 0.005000, -0.012500, -0.020000, -0.015000, 0.012500, 0.045000, 0.070000
#*# 	-0.047500, 0.017500, 0.017500, 0.017500, 0.005000, -0.002500, -0.022500, -0.032500, -0.025000, 0.005000, 0.035000, 0.067500
#*# 	-0.040000, 0.022500, 0.025000, 0.025000, 0.012500, 0.000000, -0.017500, -0.025000, -0.015000, 0.012500, 0.047500, 0.080000
#*# tension = 0.2
#*# min_x = 10.0
#*# algo = bicubic
#*# y_count = 12
#*# mesh_y_pps = 5
#*# min_y = 30.0
#*# x_count = 12
#*# max_y = 269.91
#*# mesh_x_pps = 5
#*# max_x = 289.95
#*#
#*# [bed_mesh 100.0C]
#*# version = 1
#*# points =
#*# 	1.745000, 1.737500, 1.735000, 1.732500, 1.722500, 1.712500, 1.700000, 1.695000, 1.697500, 1.712500, 1.732500, 1.757500
#*# 	1.722500, 1.722500, 1.717500, 1.715000, 1.710000, 1.697500, 1.685000, 1.680000, 1.680000, 1.695000, 1.717500, 1.737500
#*# 	1.745000, 1.742500, 1.727500, 1.720000, 1.710000, 1.700000, 1.687500, 1.685000, 1.690000, 1.705000, 1.732500, 1.762500
#*# 	1.750000, 1.747500, 1.747500, 1.740000, 1.730000, 1.722500, 1.705000, 1.702500, 1.707500, 1.725000, 1.750000, 1.775000
#*# 	1.742500, 1.730000, 1.722500, 1.712500, 1.702500, 1.697500, 1.682500, 1.677500, 1.685000, 1.707500, 1.740000, 1.770000
#*# 	1.712500, 1.710000, 1.705000, 1.695000, 1.690000, 1.685000, 1.670000, 1.667500, 1.672500, 1.692500, 1.717500, 1.745000
#*# 	1.712500, 1.697500, 1.687500, 1.677500, 1.682500, 1.675000, 1.652500, 1.655000, 1.657500, 1.682500, 1.715000, 1.752500
#*# 	1.730000, 1.725000, 1.720000, 1.715000, 1.705000, 1.705000, 1.692500, 1.682500, 1.690000, 1.710000, 1.737500, 1.767500
#*# 	1.740000, 1.725000, 1.720000, 1.710000, 1.697500, 1.687500, 1.677500, 1.675000, 1.685000, 1.707500, 1.740000, 1.775000
#*# 	1.732500, 1.727500, 1.725000, 1.720000, 1.705000, 1.695000, 1.682500, 1.680000, 1.685000, 1.705000, 1.737500, 1.762500
#*# 	1.732500, 1.715000, 1.707500, 1.695000, 1.682500, 1.670000, 1.657500, 1.657500, 1.662500, 1.685000, 1.717500, 1.752500
#*# 	1.752500, 1.747500, 1.742500, 1.732500, 1.717500, 1.702500, 1.687500, 1.682500, 1.692500, 1.710000, 1.735000, 1.767500
#*# tension = 0.2
#*# min_x = 30.0
#*# algo = bicubic
#*# y_count = 12
#*# mesh_y_pps = 5
#*# min_y = 30.0
#*# x_count = 12
#*# max_y = 269.91
#*# mesh_x_pps = 5
#*# max_x = 269.91
